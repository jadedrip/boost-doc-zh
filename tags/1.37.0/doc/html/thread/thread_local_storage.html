<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>Thread Local Storage</title><link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../thread.html" title="Chapter&nbsp;19.&nbsp;Thread">
<link rel="prev" href="synchronization.html" title="Synchronization">
<link rel="next" href="time.html" title="Date and Time Requirements"></head>
<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">
<table cellpadding="2" width="100%"><tbody><tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../index.html">Home</a></td>
<td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../more/index.htm">More</a></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="synchronization.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../thread.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="time.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en"><div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both;">
<a name="thread.thread_local_storage"></a><a class="link" href="../thread_/thread_local_storage.html" title="Thread Local Storage">Thread Local Storage</a>
</h2></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr"> Class
      <code class="computeroutput"><span class="identifier">thread_specific_ptr</span></code></a></span></dt></dl></div>
<a name="thread.thread_local_storage.synopsis"></a><h4>
<a name="id3566188"></a>&nbsp;&#27010;&#36848;
    </h4>
<p> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &#32447;&#31243;&#26412;&#22320;&#21270;&#23384;&#20648;&#20801;&#35768;&#22810;&#20010;&#32447;&#31243;&#23545;&#35937;&#25317;&#26377;&#29305;&#23450;&#25968;&#25454;&#30340;&#29420;&#31435;&#25335;&#36125;.
&#21333;&#32447;&#31243;&#31243;&#24207;&#36890;&#24120;&#20351;&#29992;&#30340;&#30340;&#38745;&#24577;&#25968;&#25454;&#21644;&#20840;&#23616;&#25968;&#25454;&#22312;&#22810;&#32447;&#31243;&#31243;&#24207;&#20013;&#20250;&#24341;&#21457;&#35775;&#38382;&#31454;&#20105;&#65292;&#27515;&#38145;&#65292;&#25110;&#32773;&#25968;&#25454;&#30772;&#22351;&nbsp;. &#19968;&#20010;&#20363;&#23376;&#23601;&#26159; C&#36816;&#34892;&#24211;&#20013;&#30340; <code class="computeroutput"><span class="identifier">errno</span></code>&nbsp;&#21464;&#37327;, &#35813;&#21464;&#37327;&#25918;C&#26631;&#20934;&#24211;&#20013;&#20989;&#25968;&#30340;&#38169;&#35823;&#20195;&#30721;. &#23545;&#20110;&#25903;&#25345;&#22810;&#32447;&#31243;&#30340;&#32534;&#35793;&#22120;&#26469;&#35828;&#65292;&#20026;&#27599;&#20010;&#32447;&#31243;&#25552;&#20379;&#19968;&#20010;&#29420;&#31435;&#30340;<code class="computeroutput"><span class="identifier">errno</span></code>
&#26159;&#24120;&#35265;&#30340;&#20570;&#27861;&#65292;&#20197;&#27492;&#36991;&#20813;&#22810;&#20010;&#32447;&#31243;&#31454;&#20105;&#23545;&#23427;&#30340;&#35775;&#38382;&#21644;&#26356;&#26032;(&#36825;&#20063;&#26159;POSIX &#26631;&#20934;&#35201;&#27714;&#30340;).
    </p>
<p>
      &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &#23613;&#31649;&#32534;&#35793;&#22120;&#36890;&#24120;&#25552;&#20379;&#19968;&#20123;&#24418;&#24335;&#30340;&#35821;&#27861;&#25193;&#23637;&#26469;&#26041;&#20415;&#26631;&#35760;&#32447;&#31243;&#26412;&#22320;&#23384;&#20648;(&#27604;&#22914;&#29992;&#20110;&nbsp;<code class="computeroutput"><span class="keyword">static </span></code>&#25110;&#21517;&#23383;&#31354;&#38388;&#20869;&#21464;&#37327;&#22768;&#26126;&#21069;&#30340; <code class="computeroutput"><span class="identifier">__declspec</span><span class="special">(</span><span class="identifier">thread</span><span class="special">)<span style="font-family: sans;"></span></span></code> &#25110;<code class="computeroutput"><span class="identifier">__thread</span></code> &#26631;&#35760;), &#20294;&#26159;&#36825;&#20123;&#25903;&#25345;&#26159;&#19981;&#21487;&#31227;&#26893;&#30340;, &#20063;&#20165;&#38480;&#20110;&#26576;&#20123;&#29992;&#36884;, &#27604;&#22914;&#21482;&#25903;&#25345; POD &#31867;&#22411;.
    </p>
<a name="thread.thread_local_storage.portable_thread_local_storage_with__code__phrase_role__identifier__boost__phrase__phrase_role__special______phrase__phrase_role__identifier__thread_specific_ptr__phrase___code_"></a><h4>
<a name="id3566293"></a> <a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.portable_thread_local_storage_with__code__phrase_role__identifier__boost__phrase__phrase_role__special______phrase__phrase_role__identifier__thread_specific_ptr__phrase___code_">&#30001;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>&#23454;&#29616;&#30340;&#21487;&#31227;&#26893;&#30340;&#32447;&#31243;&#26412;&#22320;&#21270;&#23384;&#20648;<code class="computeroutput"><span class="identifier"></span></code></a>
    </h4>
<p>
      <code class="computeroutput"><span class="identifier">&nbsp;&nbsp;&nbsp; boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>&nbsp;&#25552;&#20379;&#20102;&#19968;&#20010;&#32447;&#31243;&#26412;&#22320;&#21270;&#23384;&#20648;&#26426;&#21046;&#30340;&#21487;&#31227;&#26893;&#23454;&#29616;&#65292;&#22312;&#25903;&#25345;<span class="bold"><strong>Boost.Thread</strong></span>&#30340;&#25152;&#26377;&#24179;&#21488;&#19978;&#36866;&#29992;<span class="bold"><strong></strong></span>. &#27599;&#20010;Each instance of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>
      represents &#25351;&#38024;&#25351;&#21521;&#19968;&#20010;&#23545;&#35937;a pointer to an object (&#27604;&#22914;such as <code class="computeroutput"><span class="identifier">errno</span></code>)
      where&#36825;&#20123;&#23545;&#35937;&#35201;&#27714;&#22312;&#19981;&#21516;&#30340;&#32447;&#31243;&#38388;&#26377;&#19981;&#21516;&#30340;&#20540; each thread must have a distinct value. &#24403;&#21069;&#32447;&#31243;&#23545;&#24212;&#30340;&#23545;&#35937;&#30340;&#20540;&#21487;&#20197;&#36890;&#36807;&#25104;&#21592;&#20989;&#25968;The value for the current thread
      can be obtained using the <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code> member&#33719;&#21462; function, or by &#25110;&#26159;&#36890;&#36807;using the <code class="computeroutput"><span class="special">*</span></code> and <code class="computeroutput"><span class="special">-&gt;</span></code>
      pointer &#25805;&#20316;deference operators. &#36825;&#20123;&#23545;&#35937;&#30340;&#21021;&#22987;&#20540;&#20026;Initially the pointer has a value of <code class="computeroutput"><span class="identifier">NULL</span></code> in each thread, but &#38656;&#35201;&#36890;&#36807;&#20989;&#25968;the value for the
      current thread can be set using the <code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code> member &#25913;&#21464;&#24403;&#21069;&#32447;&#31243;&#23545;&#24212;&#30340;&#20540;function.
    </p>
<p>
      &nbsp; &nbsp; &nbsp; &nbsp;&#22914;&#26524;&#36890;&#36807;<code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code> &#23558;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code> &#30340;&#25351;&#21521;&#25913;&#21464;,
     &#37027;&#20040;&#22312;&#27492;&#20043;&#21069;&#30340;&#20540;&#20250;&#34987;&#28165;&#29702;, &#21478;&#22806;, &#23384;&#20648;&#30340;&#20540;&#21487;&#20197;&#36890;&#36807;&#25104;&#21592;&#20989;&#25968;<code class="computeroutput"><span class="identifier">release</span><span class="special">()</span></code> &#32622;&#20026;<code class="computeroutput"><span class="identifier">NULL</span></code>, &#35813;&#20989;&#25968;&#21516;&#26102;&#36820;&#22238;&#36825;&#20010;&#20540;, &#36825;&#26679;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#26377;&#26426;&#20250;&#38144;&#27585;&#36825;&#20010;&#20540;&#20851;&#32852;&#30340;&#23545;&#35937;.
    </p>
<a name="thread.thread_local_storage.cleanup_at_thread_exit"></a><h4>
<a name="id3566505"></a>&nbsp;<a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.cleanup_at_thread_exit">&#32447;&#31243;&#36864;&#20986;&#26102;&#28165;&#29702;</a>
    </h4>
<p>
      &nbsp; &nbsp; &nbsp; &nbsp;&#24403;&#19968;&#20010;&#32447;&#31243;&#36864;&#20986;,&nbsp;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>&#23454;&#20363; &#25152;&#20851;&#32852;&#30340;&#23545;&#35937;&#20250;&#34987;&#38144;&#27585;. &#36890;&#24120;&#38144;&#27585;&#30340;&#21160;&#20316;&#36890;&#36807;&#23545;&#34987;&#25351;&#21521;&#30340;&#23545;&#35937;&#35843;&#29992;<code class="computeroutput"><span class="keyword">delete</span></code>&#23436;&#25104;<code class="computeroutput"><span class="identifier"></span></code>,
      &#36825;&#20010;&#34892;&#20026;&#20063;&#21487;&#20197;&#36890;&#36807;&#21521; <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>
     &#23545;&#35937;&#26500;&#36896;&#26102;&#20256;&#36882;&#19968;&#20010;&#28165;&#29702;&#20989;&#25968;<code class="computeroutput"><span class="identifier">func</span><span class="special">(</span><span class="identifier"></span><span class="special">)</span></code>&#26469;&#37325;&#36733;.&#27492;&#26102;, &#25152;&#25351;&#21521;&#23545;&#35937;&#36890;&#36807;&#35843;&#29992; <code class="computeroutput"><span class="identifier">func</span><span class="special">(</span><span class="identifier">p</span><span class="special">)</span></code>&nbsp;&#26469;&#38144;&#27585;&nbsp;.&#36825;&#20123;&#28165;&#29702;&#20989;&#25968;&#35843;&#29992;&#39034;&#24207;&#19981;&#26159;&#30830;&#23450;&#30340;&nbsp;. &#22914;&#26524;&#19968;&#20010;&#28165;&#29702;&#20989;&#25968;&#23558; &#23545;&#35937;&#20851;&#32852;&#30340;&#20540;&#35774;&#32622;&#20026;&#19968;&#20010;&#34987;&#28165;&#29702;&#36807;&#30340;&#20540;, &#36825;&#20010;&#20540;&#20250;&#34987;&#28155;&#21152;&#21040;&#28165;&#29702;&#21015;&#34920;&#20013;. &#24403;&#25152;&#26377; <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>
 &#23545;&#35937;&#34987;&#32622;&#20026;&#31354;&#26102;&#65292;&#28165;&#29702;&#36807;&#31243;&#32467;&#26463;.
    </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr" title="Class thread_specific_ptr"> Class
      <code class="computeroutput"><span class="identifier">thread_specific_ptr</span></code></a>
</h3></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.default_constructor">
        <code class="computeroutput"><span class="identifier">thread_specific_ptr</span><span class="special">();</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.constructor_with_custom_cleanup">
        <code class="computeroutput"><span class="keyword">explicit</span> <span class="identifier">thread_specific_ptr</span><span class="special">(</span><span class="keyword">void</span> <span class="special">(*</span><span class="identifier">cleanup_function</span><span class="special">)(</span><span class="identifier">T</span><span class="special">*));</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.destructor">
        <code class="computeroutput"><span class="special">~</span><span class="identifier">thread_specific_ptr</span><span class="special">();</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.get">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">get</span><span class="special">()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.operator_arrow">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="keyword">operator</span><span class="special">-&gt;()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.operator_star">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">&amp;</span>
        <span class="keyword">operator</span><span class="special">*()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.reset">
        <code class="computeroutput"><span class="keyword">void</span> <span class="identifier">reset</span><span class="special">(</span><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">new_value</span><span class="special">=</span><span class="number">0</span><span class="special">);</span></code></a></span></dt><dt><span class="section"><a href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.release">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">release</span><span class="special">();</span></code></a></span></dt></dl></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">thread</span><span class="special">/</span><span class="identifier">tss</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span><br><br><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span><br><span class="keyword">class</span> <span class="identifier">thread_specific_ptr</span><br><span class="special">{</span><br><span class="keyword">public</span><span class="special">:</span><br>    <span class="identifier">thread_specific_ptr</span><span class="special">();</span><br>    <span class="keyword">explicit</span> <span class="identifier">thread_specific_ptr</span><span class="special">(</span><span class="keyword">void</span> <span class="special">(*</span><span class="identifier">cleanup_function</span><span class="special">)(</span><span class="identifier">T</span><span class="special">*));</span><br>    <span class="special">~</span><span class="identifier">thread_specific_ptr</span><span class="special">();</span><br><br>    <span class="identifier">T</span><span class="special">*</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span><br>    <span class="identifier">T</span><span class="special">*</span> <span class="keyword">operator</span><span class="special">-&gt;()</span> <span class="keyword">const</span><span class="special">;</span><br>    <span class="identifier">T</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">*()</span> <span class="keyword">const</span><span class="special">;</span><br><br>    <span class="identifier">T</span><span class="special">*</span> <span class="identifier">release</span><span class="special">();</span><br>    <span class="keyword">void</span> <span class="identifier">reset</span><span class="special">(</span><span class="identifier">T</span><span class="special">*</span> <span class="identifier">new_value</span><span class="special">=</span><span class="number">0</span><span class="special">);</span><br><span class="special">};</span>
</pre>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.default_constructor"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.default_constructor" title="thread_specific_ptr();">
        <code class="computeroutput"><span class="identifier">thread_specific_ptr</span><span class="special">();</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#35201;&#27714;:</span></dt><dd><p>
              <code class="computeroutput"><span class="keyword">delete</span> <span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()</span></code> &#26377;&#24847;&#20041;.
            </p></dd><dt><span class="term">&#25928;&#26524;:</span></dt><dd><p>
              &#26500;&#36896;&#19968;&#20010; <code class="computeroutput"><span class="identifier">thread_specific_ptr</span></code>&nbsp; &#23545;&#35937;&#65292;&#23384;&#20648;&#19968;&#20010;<code class="computeroutput"><span class="identifier">T</span></code>&#31867;&#22411;&#30340;&#25351;&#38024;&#65292;&#25351;&#21521;&#32447;&#31243;&#26412;&#22320;&#21270;&#23545;&#35937;. &#22312;&#20989;&#25968; <code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code>&nbsp;&#34987;&#35843;&#29992;, &#25110;&#32773;&#32447;&#31243;&#36864;&#20986;&#26102;&#65292;&#40664;&#35748;&#22522;&#20110;<code class="computeroutput"><span class="keyword">delete</span></code> &#30340;&#28165;&#29702;&#20989;&#25968;&#20250;&#34987;&#35843;&#29992;&#26469;&#38144;&#27585;&#32447;&#31243;&#26412;&#22320;&#30340;&#23545;&#35937;.
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              &#22914;&#26524;&#20986;&#38169;&#65292;&#25243;&#20986;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_resource_error</span></code>&#24322;&#24120;.
            </p></dd></dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.constructor_with_custom_cleanup"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.constructor_with_custom_cleanup" title="explicit thread_specific_ptr(void (*cleanup_function)(T*));">
        <code class="computeroutput"><span class="keyword">explicit</span> <span class="identifier">thread_specific_ptr</span><span class="special">(</span><span class="keyword">void</span> <span class="special">(*</span><span class="identifier">cleanup_function</span><span class="special">)(</span><span class="identifier">T</span><span class="special">*));</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#35201;&#27714;:</span></dt><dd><p>
              <code class="computeroutput"><span class="identifier">cleanup_function</span><span class="special">(</span><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">())</span></code> &#35843;&#29992;&#19981;&#25243;&#20986;&#24322;&#24120;.
            </p></dd><dt><span class="term">&#25928;&#26524;:</span></dt><dd><p>
              &#26500;&#36896;&#19968;&#20010; <code class="computeroutput"><span class="identifier">thread_specific_ptr</span></code>&nbsp; &#23545;&#35937;&#65292;&#23384;&#20648;&#19968;&#20010;<code class="computeroutput"><span class="identifier">T</span></code>&#31867;&#22411;&#30340;&#25351;&#38024;&#65292;&#25351;&#21521;&#32447;&#31243;&#26412;&#22320;&#21270;&#23545;&#35937;. &#22312;&#20989;&#25968; <code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code>&nbsp;&#34987;&#35843;&#29992;, &#25110;&#32773;&#32447;&#31243;&#36864;&#20986;&#26102;&#65292;&#22522;&#20110;<code class="computeroutput"><span class="identifier">cleanup_function</span></code><code class="computeroutput"><span class="keyword"></span></code>&#30340;&#28165;&#29702;&#20989;&#25968;&#20250;&#34987;&#35843;&#29992;&#26469;&#38144;&#27585;&#32447;&#31243;&#26412;&#22320;&#30340;&#23545;&#35937;.
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              &#22914;&#26524;&#20986;&#38169;&#65292;&#25243;&#20986;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_resource_error</span></code>&#24322;&#24120;.
            </p></dd></dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.destructor"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.destructor" title="~thread_specific_ptr();">
        <code class="computeroutput"><span class="special">~</span><span class="identifier">thread_specific_ptr</span><span class="special">();</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#25928;&#26524;:</span></dt><dd><p>&#35843;&#29992;&#20989;&#25968; <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">reset</span><span class="special">()</span></code>
              to &#28165;&#29702;&#24403;&#21069;&#32447;&#31243;&#30456;&#20851;&#26412;&#22320;&#23384;&#20648;&#23545;&#35937;, &#24182;&#38144;&#27585;&#33258;&#36523;&#65288;<code class="computeroutput"><span class="special">*</span><span class="keyword">this&#65289;</span></code>.
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>&#26080;.
            </p></dd></dl>
</div>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">&#27880;</th>
</tr>
<tr><td align="left" valign="top"><p>
            &#24517;&#39035;&#23567;&#24515;&#30830;&#20445;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>
 &#23545;&#35937;&#38144;&#27585;&#21518;&#65292;&#32447;&#31243;&#19981;&#20877;&#35843;&#29992;&#35813;&#23545;&#35937;&#30340;&#20989;&#25968;.
          </p></td></tr>
</tbody></table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.get"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.get" title="T* get() const;">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">get</span><span class="special">()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#36820;&#22238;&#20540;:</span></dt><dd><p>&#24403;&#21069;&#32447;&#31243;&#30456;&#20851;&#26412;&#22320;&#23384;&#20648;&#23545;&#35937;&#30340;&#25351;&#38024;.
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>&#26080;.
            </p></dd></dl>
</div>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">&#27880;</th>
</tr>
<tr><td align="left" valign="top"><p>&#21644;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_specific_ptr</span></code>
&#20851;&#32852;&#23545;&#35937;&#21021;&#22987;&#20540;&#20026; <code class="computeroutput"><span class="identifier">NULL</span></code>.
          </p></td></tr>
</tbody></table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.operator_arrow"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.operator_arrow" title="T* operator-&gt;() const;">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="keyword">operator</span><span class="special">-&gt;()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#36820;&#22238;&#20540;:</span></dt><dd><p>
              <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()</span></code>
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              &#26080;.
            </p></dd></dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.operator_star"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.operator_star" title="T&amp; operator*() const;">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">&amp;</span>
        <span class="keyword">operator</span><span class="special">*()</span>
        <span class="keyword">const</span><span class="special">;</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#35201;&#27714;:</span></dt><dd><p>
              <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get&#65288;&#65289; &#36820;&#22238;&#38750;&#31354;&#20540;</span></code><code class="computeroutput"><span class="identifier"></span></code>.
            </p></dd><dt><span class="term">&#36820;&#22238;&#20540;:</span></dt><dd><p>
              <code class="computeroutput"><span class="special">*(</span><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">())</span></code>
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              &#26080;.
            </p></dd></dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.reset"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.reset" title="void reset(T* new_value=0);">
        <code class="computeroutput"><span class="keyword">void</span> <span class="identifier">reset</span><span class="special">(</span><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">new_value</span><span class="special">=</span><span class="number">0</span><span class="special">);</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#25928;&#26524;:</span></dt><dd><p>
              &#22914;&#26524;If <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()!=</span><span class="identifier">new_value</span></code>&nbsp;&#24182;&#19988; <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()</span></code>&#36820;&#22238;&#38750;&#31354;&#65288;non-<code class="computeroutput"><span class="identifier">NULL</span></code>&#65289;,
              &#35843;&#29992;&#23545;&#24212;&#30340;&#28165;&#29702;&#20989;&#25968;&#65292; <code class="computeroutput"><span class="keyword">delete</span> <span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()</span></code> &#25110;&#32773; <code class="computeroutput"><span class="identifier">cleanup_function</span><span class="special">(</span><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">())</span></code>&nbsp;. &#23558; <code class="computeroutput"><span class="identifier">new_value</span></code> &#20445;&#23384;&#20026;&#21644;&#24403;&#21069;&#32447;&#31243;&#20851;&#32852;&#30340;&#25351;&#38024;
            </p></dd><dt><span class="term">&#21518;&#32622;&#26465;&#20214;:</span></dt><dd><p>
              <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()==</span><span class="identifier">new_value</span></code>
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              <code class="computeroutput"><span class="identifier"></span></code>&#22914;&#26524;&#20986;&#38169;&#65292;&#25243;&#20986;<code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_resource_error</span></code>&#24322;&#24120;.
            </p></dd></dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.thread_local_storage.thread_specific_ptr.release"></a><a class="link" href="../thread_/thread_local_storage.html#thread.thread_local_storage.thread_specific_ptr.release" title="T* release();">
        <code class="computeroutput"><span class="identifier">T</span><span class="special">*</span>
        <span class="identifier">release</span><span class="special">();</span></code></a>
</h4></div></div></div>
<div class="variablelist">
<p class="title"></p>
<dl><dt><span class="term">&#25928;&#26524;:</span></dt><dd><p>
              &#36820;&#22238; <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()</span></code>&#65292; &#23558;&#24403;&#21069;&#32447;&#31243;&#20851;&#32852;&#30340;&#25351;&#38024;&#32622;&#31354;&#65288; <code class="computeroutput"><span class="identifier">NULL&#65289;</span></code>&#65292;&#24182;&#19981;&#28165;&#29702;&#20851;&#32852;&#23545;&#35937;.
            </p></dd><dt><span class="term">&#21518;&#32622;&#26465;&#20214;:</span></dt><dd><p>
              <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get</span><span class="special">()==</span><span class="number">0</span></code>
            </p></dd><dt><span class="term">&#25243;&#20986;:</span></dt><dd><p>
              &#26080;.
            </p></dd></dl>
</div>
</div>
</div>
</div></div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tbody><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2007 -8 Anthony Williams<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="synchronization.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../thread.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="time.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body></html>